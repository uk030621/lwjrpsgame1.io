<!DOCTYPE html>
<html>
    <head>
        <title>Rock Papaer Scissors</title>
        <style>
            body {
                background-color: black;
            }

            p{
                color: white;
                margin-left: 15px;
                font-size:30px;
                margin-bottom: 0;
            }

            img {
                width: 40px;
            }
            .rock, .paper, .scissors {
                background-color: black;
                transition: background-color 0.3s ease;
                color: white;
                margin-left: 10px;
                border-radius: 50px;
                height: 75px;
                width: 75px;
                border: solid;
                border-color: black;
                border-width: 2px;
                margin-bottom: 0;
                margin-top: 0;   
            }
            
            .rock:active, .paper:active, .scissors:active {
                cursor: pointer;
                background-color: white;
            }

            table {
                border-collapse: collapse;
                margin-top: 20px;
                margin-left: 15px;
              }

            th, td {
            border: 1px solid black;
            color: white;
            padding: 8px;
            text-align: center;
            }

            .resetGame{
                background-color: black;
                color: white;
                border: solid;
                border-color: white;
                border-radius: 6px;
                border-width: 1px;
                padding: 5px;
                display: flex;
                text-align: center;
                margin-top: 20px;
                margin-left: 90px;
            }

            .resetGame:hover {
                cursor: pointer;
                background-color: white;
                color: black;
            }

            .summary {
                color: white;
                margin-top: 20px;
                margin-left: 0px;
                width: 325px;
                text-align: center;
                line-height: 30px;
            }

            .stats {
                color: white;
                margin-top: 35px;
                margin-left: 50px;
            }


        </style>
    </head>
    <body>
        <p>Rock Paper Scissors</p>
        <button class = "rock" id = "rockButton">
            <img src = "rock-emoji.png">
        </button>
        <button class = "paper" id = "paperButton">
            <img src = "paper-emoji.png">
        </button>
        <button class = "scissors" id = "scissorsButton">
            <img src = "scissors-emoji.png">
        </button>

    <div class = "summary" id="result"></div>
    
    <table id="tally">
      <tr>
        <th>Wins</th>
        <th>Ties</th>
        <th>Losses</th>
        <th>Attempts</th>
      </tr>
      <tr>
        <td id="wins">0</td>
        <td id="ties">0</td>
        <td id="losses">0</td>
        <td id="attempts">0</td>
      </tr>
    </table>

    <button class = "resetGame" id = resetAll>Reset Game</button>

    <div class = "stats" id="outcome"></div>

        <script>
                // Declare variables outside of the onclick handlers
            let randomNumber, computerMove;
            let wins = 0, ties = 0, losses = 0, count;
            let attempts = 0;
            const maxAttempts = 20;
            let success = 0

            function getImageUrl(move) {
                switch (move) {
                    case 'rock':
                        return 'rock-emoji.png';
                    case 'paper':
                        return 'paper-emoji.png';
                    case 'scissors':
                        return 'scissors-emoji.png';
                    default:
                        return '';
                }
            }

            function resetGame() {
                wins = 0;
                ties = 0;
                losses = 0;
                attempts = 0;
                success = 0;
                
                // Update tally table
                document.getElementById('wins').textContent = wins;
                document.getElementById('ties').textContent = ties;
                document.getElementById('losses').textContent = losses;
                document.getElementById('attempts').textContent = attempts;
                
                // Clear result and outcome
                document.getElementById('result').textContent = '';
                document.getElementById('outcome').textContent = '';
                
                // Reset button states
                document.getElementById('rockButton').disabled = false;
                document.getElementById('paperButton').disabled = false;
                document.getElementById('scissorsButton').disabled = false;
            }
            

            // Function to generate computer move and display result
            function playGame(playerMove) {
                // Increment attempts
                attempts++;
                // Generate random number
                randomNumber = Math.random();
                
                // Determine computer move based on random number
                if (randomNumber >= 0 && randomNumber < 1 / 3) {
                computerMove = 'rock';
                } else if (randomNumber >= 1 / 3 && randomNumber < 2 / 3) {
                computerMove = 'paper';
                } else if (randomNumber >= 2 / 3 && randomNumber < 1) {
                computerMove = 'scissors';
                }

                // Determine result
                let result;
                if (playerMove === computerMove) {
                result = 'Tie.';
                ties++;
                } else if (
                (playerMove === 'rock' && computerMove === 'scissors') ||
                (playerMove === 'paper' && computerMove === 'rock') ||
                (playerMove === 'scissors' && computerMove === 'paper')
                ) {
                result = 'You win.';
                wins++;
                } else {
                result = 'You lose.';
                losses++;
                }
                
                // Update tally table
                document.getElementById('wins').textContent = wins;
                document.getElementById('ties').textContent = ties;
                document.getElementById('losses').textContent = losses;
                document.getElementById('attempts').textContent = attempts;

                success = ((wins/attempts)*100).toFixed(1);

                let resultStyle = '';
                if (result === 'You win.') {
                    resultStyle = 'font-weight: bold; font-size: 24px';
                } else if (result === 'You lose.') {
                    resultStyle = 'font-weight: bold; font-size: 24px';
                }
                else {
                    resultStyle = 'font-weight: bold; font-size: 24px';
                }

                
                // Display result
                //document.getElementById('result').textContent = `You picked ${playerMove}.\n Computer picked ${computerMove}.\n ${result}`;
                //document.getElementById('result').innerHTML = `You picked ${playerMove}. Computer picked ${computerMove}.<br>${result}`;
                document.getElementById('result').innerHTML = `
                    You picked <img src="${getImageUrl(playerMove)}" style="width: 30px; height: 30px;"> 
                    Computer picked <img src="${getImageUrl(computerMove)}" style="width: 30px; height: 30px;">
                    <br><span style="${resultStyle}">${result}</span>`;
                document.getElementById('outcome').textContent = `Your success rate =  ${success}%.`;
                
                // Disable buttons if maximum attempts reached
                if (attempts >= maxAttempts) {
                    document.getElementById('rockButton').disabled = true;
                    document.getElementById('paperButton').disabled = true;
                    document.getElementById('scissorsButton').disabled = true;
                }

                
                //console.log('wins =', wins, 'attempts =', attempts);
                //console.log('Success Rate = ', success,'%')

            }

            

            // Attach onclick handlers to buttons
            document.getElementById('rockButton').onclick = function () {
                playGame('rock');
            };
            document.getElementById('paperButton').onclick = function () {
                playGame('paper');
            };
            document.getElementById('scissorsButton').onclick = function () {
                playGame('scissors');
            }; 
            document.getElementById('resetAll').onclick = function () {
                resetGame();
            }; 


        </script>
    </body>
</html>
